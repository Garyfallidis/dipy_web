{"body": "<div class=\"section\" id=\"visualize-surfaces\">\n<span id=\"example-viz-surfaces\"></span><h1>Visualize surfaces<a class=\"headerlink\" href=\"#visualize-surfaces\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p>Here is a simple tutorial that shows how to visualize surfaces using DIPY. It\nalso shows how to load/save, get/set and update vtkPolyData and show\nsurfaces.</p>\n<p>vtkPolyData is a structure used by VTK to represent surfaces and other data\nstructures. Here we show how to visualize a simple cube but the same idea\nshould apply for any surface.</p>\n<div class=\"highlight-default\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">numpy</span> <span class=\"k\">as</span> <span class=\"nn\">np</span>\n</pre></div>\n</div>\n<p>Import useful functions from dipy.viz.utils</p>\n<div class=\"highlight-default\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">dipy.io.vtk</span> <span class=\"k\">as</span> <span class=\"nn\">io_vtk</span>\n<span class=\"kn\">import</span> <span class=\"nn\">dipy.viz.utils</span> <span class=\"k\">as</span> <span class=\"nn\">ut_vtk</span>\n<span class=\"kn\">from</span> <span class=\"nn\">dipy.viz</span> <span class=\"k\">import</span> <span class=\"n\">window</span>\n\n<span class=\"c1\"># Conditional import machinery for vtk</span>\n<span class=\"c1\"># Allow import, but disable doctests if we don&#39;t have vtk</span>\n<span class=\"kn\">from</span> <span class=\"nn\">dipy.utils.optpkg</span> <span class=\"k\">import</span> <span class=\"n\">optional_package</span>\n<span class=\"n\">vtk</span><span class=\"p\">,</span> <span class=\"n\">have_vtk</span><span class=\"p\">,</span> <span class=\"n\">setup_module</span> <span class=\"o\">=</span> <span class=\"n\">optional_package</span><span class=\"p\">(</span><span class=\"s1\">&#39;vtk&#39;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>Create an empty vtkPolyData</p>\n<div class=\"highlight-default\"><div class=\"highlight\"><pre><span></span><span class=\"n\">my_polydata</span> <span class=\"o\">=</span> <span class=\"n\">vtk</span><span class=\"o\">.</span><span class=\"n\">vtkPolyData</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<p>Create a cube with vertices and triangles as numpy arrays</p>\n<div class=\"highlight-default\"><div class=\"highlight\"><pre><span></span><span class=\"n\">my_vertices</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">([[</span><span class=\"mf\">0.0</span><span class=\"p\">,</span>  <span class=\"mf\">0.0</span><span class=\"p\">,</span>  <span class=\"mf\">0.0</span><span class=\"p\">],</span>\n                       <span class=\"p\">[</span><span class=\"mf\">0.0</span><span class=\"p\">,</span>  <span class=\"mf\">0.0</span><span class=\"p\">,</span>  <span class=\"mf\">1.0</span><span class=\"p\">],</span>\n                       <span class=\"p\">[</span><span class=\"mf\">0.0</span><span class=\"p\">,</span>  <span class=\"mf\">1.0</span><span class=\"p\">,</span>  <span class=\"mf\">0.0</span><span class=\"p\">],</span>\n                       <span class=\"p\">[</span><span class=\"mf\">0.0</span><span class=\"p\">,</span>  <span class=\"mf\">1.0</span><span class=\"p\">,</span>  <span class=\"mf\">1.0</span><span class=\"p\">],</span>\n                       <span class=\"p\">[</span><span class=\"mf\">1.0</span><span class=\"p\">,</span>  <span class=\"mf\">0.0</span><span class=\"p\">,</span>  <span class=\"mf\">0.0</span><span class=\"p\">],</span>\n                       <span class=\"p\">[</span><span class=\"mf\">1.0</span><span class=\"p\">,</span>  <span class=\"mf\">0.0</span><span class=\"p\">,</span>  <span class=\"mf\">1.0</span><span class=\"p\">],</span>\n                       <span class=\"p\">[</span><span class=\"mf\">1.0</span><span class=\"p\">,</span>  <span class=\"mf\">1.0</span><span class=\"p\">,</span>  <span class=\"mf\">0.0</span><span class=\"p\">],</span>\n                       <span class=\"p\">[</span><span class=\"mf\">1.0</span><span class=\"p\">,</span>  <span class=\"mf\">1.0</span><span class=\"p\">,</span>  <span class=\"mf\">1.0</span><span class=\"p\">]])</span>\n<span class=\"c1\"># the data type for vtk is needed to mention here, numpy.int64</span>\n<span class=\"n\">my_triangles</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">([[</span><span class=\"mi\">0</span><span class=\"p\">,</span>  <span class=\"mi\">6</span><span class=\"p\">,</span>  <span class=\"mi\">4</span><span class=\"p\">],</span>\n                         <span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">,</span>  <span class=\"mi\">2</span><span class=\"p\">,</span>  <span class=\"mi\">6</span><span class=\"p\">],</span>\n                         <span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">,</span>  <span class=\"mi\">3</span><span class=\"p\">,</span>  <span class=\"mi\">2</span><span class=\"p\">],</span>\n                         <span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">,</span>  <span class=\"mi\">1</span><span class=\"p\">,</span>  <span class=\"mi\">3</span><span class=\"p\">],</span>\n                         <span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">,</span>  <span class=\"mi\">7</span><span class=\"p\">,</span>  <span class=\"mi\">6</span><span class=\"p\">],</span>\n                         <span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">,</span>  <span class=\"mi\">3</span><span class=\"p\">,</span>  <span class=\"mi\">7</span><span class=\"p\">],</span>\n                         <span class=\"p\">[</span><span class=\"mi\">4</span><span class=\"p\">,</span>  <span class=\"mi\">6</span><span class=\"p\">,</span>  <span class=\"mi\">7</span><span class=\"p\">],</span>\n                         <span class=\"p\">[</span><span class=\"mi\">4</span><span class=\"p\">,</span>  <span class=\"mi\">7</span><span class=\"p\">,</span>  <span class=\"mi\">5</span><span class=\"p\">],</span>\n                         <span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">,</span>  <span class=\"mi\">4</span><span class=\"p\">,</span>  <span class=\"mi\">5</span><span class=\"p\">],</span>\n                         <span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">,</span>  <span class=\"mi\">5</span><span class=\"p\">,</span>  <span class=\"mi\">1</span><span class=\"p\">],</span>\n                         <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span>  <span class=\"mi\">5</span><span class=\"p\">,</span>  <span class=\"mi\">7</span><span class=\"p\">],</span>\n                         <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span>  <span class=\"mi\">7</span><span class=\"p\">,</span>  <span class=\"mi\">3</span><span class=\"p\">]],</span><span class=\"n\">dtype</span><span class=\"o\">=</span><span class=\"s1\">&#39;i8&#39;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>Set vertices and triangles in poly data</p>\n<div class=\"highlight-default\"><div class=\"highlight\"><pre><span></span><span class=\"n\">ut_vtk</span><span class=\"o\">.</span><span class=\"n\">set_polydata_vertices</span><span class=\"p\">(</span><span class=\"n\">my_polydata</span><span class=\"p\">,</span> <span class=\"n\">my_vertices</span><span class=\"p\">)</span>\n<span class=\"n\">ut_vtk</span><span class=\"o\">.</span><span class=\"n\">set_polydata_triangles</span><span class=\"p\">(</span><span class=\"n\">my_polydata</span><span class=\"p\">,</span> <span class=\"n\">my_triangles</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>Save polydata</p>\n<div class=\"highlight-default\"><div class=\"highlight\"><pre><span></span><span class=\"n\">file_name</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;my_cube.vtk&quot;</span>\n<span class=\"n\">io_vtk</span><span class=\"o\">.</span><span class=\"n\">save_polydata</span><span class=\"p\">(</span><span class=\"n\">my_polydata</span><span class=\"p\">,</span> <span class=\"n\">file_name</span><span class=\"p\">)</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">&quot;Surface saved in &quot;</span> <span class=\"o\">+</span> <span class=\"n\">file_name</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>Load polydata</p>\n<div class=\"highlight-default\"><div class=\"highlight\"><pre><span></span><span class=\"n\">cube_polydata</span> <span class=\"o\">=</span> <span class=\"n\">io_vtk</span><span class=\"o\">.</span><span class=\"n\">load_polydata</span><span class=\"p\">(</span><span class=\"n\">file_name</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>add color based on vertices position</p>\n<div class=\"highlight-default\"><div class=\"highlight\"><pre><span></span><span class=\"n\">cube_vertices</span> <span class=\"o\">=</span> <span class=\"n\">ut_vtk</span><span class=\"o\">.</span><span class=\"n\">get_polydata_vertices</span><span class=\"p\">(</span><span class=\"n\">cube_polydata</span><span class=\"p\">)</span>\n<span class=\"n\">colors</span> <span class=\"o\">=</span> <span class=\"n\">cube_vertices</span> <span class=\"o\">*</span> <span class=\"mi\">255</span>\n<span class=\"n\">ut_vtk</span><span class=\"o\">.</span><span class=\"n\">set_polydata_colors</span><span class=\"p\">(</span><span class=\"n\">cube_polydata</span><span class=\"p\">,</span> <span class=\"n\">colors</span><span class=\"p\">)</span>\n\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">&quot;new surface colors&quot;</span><span class=\"p\">)</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">ut_vtk</span><span class=\"o\">.</span><span class=\"n\">get_polydata_colors</span><span class=\"p\">(</span><span class=\"n\">cube_polydata</span><span class=\"p\">))</span>\n</pre></div>\n</div>\n<p>Visualize surfaces</p>\n<div class=\"highlight-default\"><div class=\"highlight\"><pre><span></span><span class=\"c1\"># get vtkActor</span>\n<span class=\"n\">cube_actor</span> <span class=\"o\">=</span> <span class=\"n\">ut_vtk</span><span class=\"o\">.</span><span class=\"n\">get_actor_from_polydata</span><span class=\"p\">(</span><span class=\"n\">cube_polydata</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># renderer and scene</span>\n<span class=\"n\">renderer</span> <span class=\"o\">=</span> <span class=\"n\">window</span><span class=\"o\">.</span><span class=\"n\">Renderer</span><span class=\"p\">()</span>\n<span class=\"n\">renderer</span><span class=\"o\">.</span><span class=\"n\">add</span><span class=\"p\">(</span><span class=\"n\">cube_actor</span><span class=\"p\">)</span>\n<span class=\"n\">renderer</span><span class=\"o\">.</span><span class=\"n\">set_camera</span><span class=\"p\">(</span><span class=\"n\">position</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">7</span><span class=\"p\">),</span> <span class=\"n\">focal_point</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mf\">0.5</span><span class=\"p\">,</span> <span class=\"mf\">0.5</span><span class=\"p\">,</span> <span class=\"mf\">0.5</span><span class=\"p\">))</span>\n<span class=\"n\">renderer</span><span class=\"o\">.</span><span class=\"n\">zoom</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># display</span>\n<span class=\"c1\"># window.show(renderer, size=(600, 600), reset_camera=False)</span>\n<span class=\"n\">window</span><span class=\"o\">.</span><span class=\"n\">record</span><span class=\"p\">(</span><span class=\"n\">renderer</span><span class=\"p\">,</span> <span class=\"n\">out_path</span><span class=\"o\">=</span><span class=\"s1\">&#39;cube.png&#39;</span><span class=\"p\">,</span> <span class=\"n\">size</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">600</span><span class=\"p\">,</span> <span class=\"mi\">600</span><span class=\"p\">))</span>\n</pre></div>\n</div>\n<div class=\"figure align-center\" id=\"id1\">\n<img alt=\"../../_images/cube.png\" src=\"../../_images/cube.png\" />\n<p class=\"caption\"><span class=\"caption-text\"><strong>An example of a simple surface visualized with DIPY</strong>.</span></p>\n</div>\n<div class=\"admonition-example-source-code admonition\">\n<p class=\"first admonition-title\">Example source code</p>\n<p class=\"last\">You can download <a class=\"reference download internal\" href=\"../../_downloads/viz_surfaces.py\" download=\"\"><code class=\"xref download docutils literal\"><span class=\"pre\">the</span> <span class=\"pre\">full</span> <span class=\"pre\">source</span> <span class=\"pre\">code</span> <span class=\"pre\">of</span> <span class=\"pre\">this</span> <span class=\"pre\">example</span></code></a>.\nThis same script is also included in the dipy source distribution under the\n<code class=\"file docutils literal\"><span class=\"pre\">doc/examples/</span></code> directory.</p>\n</div>\n</div>\n", "alabaster_version": "0.7.7", "display_toc": false, "title": "Visualize surfaces", "sourcename": "examples_built/viz_surfaces.rst.txt", "customsidebar": null, "metatags": "", "current_page_name": "examples_built/viz_surfaces", "next": null, "rellinks": [["genindex", "General Index", "I", "index"]], "meta": {}, "parents": [], "sidebars": null, "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Visualize surfaces</a></li>\n</ul>\n", "prev": null, "page_source_suffix": ".rst"}