{"body": "<div class=\"section\" id=\"user-interface\">\n<span id=\"example-viz-ui\"></span><h1>User Interface<a class=\"headerlink\" href=\"#user-interface\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p>This example shows how to use the UI API.\nCurrently includes button, textbox, panel, and line slider.</p>\n<p>First, a bunch of imports.</p>\n<div class=\"highlight-default\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">dipy.data</span> <span class=\"k\">import</span> <span class=\"n\">read_viz_icons</span><span class=\"p\">,</span> <span class=\"n\">fetch_viz_icons</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">dipy.viz</span> <span class=\"k\">import</span> <span class=\"n\">ui</span><span class=\"p\">,</span> <span class=\"n\">window</span>\n</pre></div>\n</div>\n<div class=\"section\" id=\"d-elements\">\n<h2>3D Elements<a class=\"headerlink\" href=\"#d-elements\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>Let&#8217;s have some cubes in 3D.</p>\n<div class=\"highlight-default\"><div class=\"highlight\"><pre><span></span><span class=\"k\">def</span> <span class=\"nf\">cube_maker</span><span class=\"p\">(</span><span class=\"n\">color</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">size</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mf\">0.2</span><span class=\"p\">,</span> <span class=\"mf\">0.2</span><span class=\"p\">,</span> <span class=\"mf\">0.2</span><span class=\"p\">),</span> <span class=\"n\">center</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">):</span>\n    <span class=\"n\">cube</span> <span class=\"o\">=</span> <span class=\"n\">window</span><span class=\"o\">.</span><span class=\"n\">vtk</span><span class=\"o\">.</span><span class=\"n\">vtkCubeSource</span><span class=\"p\">()</span>\n    <span class=\"n\">cube</span><span class=\"o\">.</span><span class=\"n\">SetXLength</span><span class=\"p\">(</span><span class=\"n\">size</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">])</span>\n    <span class=\"n\">cube</span><span class=\"o\">.</span><span class=\"n\">SetYLength</span><span class=\"p\">(</span><span class=\"n\">size</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">])</span>\n    <span class=\"n\">cube</span><span class=\"o\">.</span><span class=\"n\">SetZLength</span><span class=\"p\">(</span><span class=\"n\">size</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">])</span>\n    <span class=\"k\">if</span> <span class=\"n\">center</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n        <span class=\"n\">cube</span><span class=\"o\">.</span><span class=\"n\">SetCenter</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">center</span><span class=\"p\">)</span>\n    <span class=\"n\">cube_mapper</span> <span class=\"o\">=</span> <span class=\"n\">window</span><span class=\"o\">.</span><span class=\"n\">vtk</span><span class=\"o\">.</span><span class=\"n\">vtkPolyDataMapper</span><span class=\"p\">()</span>\n    <span class=\"n\">cube_mapper</span><span class=\"o\">.</span><span class=\"n\">SetInputConnection</span><span class=\"p\">(</span><span class=\"n\">cube</span><span class=\"o\">.</span><span class=\"n\">GetOutputPort</span><span class=\"p\">())</span>\n    <span class=\"n\">cube_actor</span> <span class=\"o\">=</span> <span class=\"n\">window</span><span class=\"o\">.</span><span class=\"n\">vtk</span><span class=\"o\">.</span><span class=\"n\">vtkActor</span><span class=\"p\">()</span>\n    <span class=\"n\">cube_actor</span><span class=\"o\">.</span><span class=\"n\">SetMapper</span><span class=\"p\">(</span><span class=\"n\">cube_mapper</span><span class=\"p\">)</span>\n    <span class=\"k\">if</span> <span class=\"n\">color</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n        <span class=\"n\">cube_actor</span><span class=\"o\">.</span><span class=\"n\">GetProperty</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">SetColor</span><span class=\"p\">(</span><span class=\"n\">color</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"n\">cube_actor</span>\n\n<span class=\"n\">cube_actor_1</span> <span class=\"o\">=</span> <span class=\"n\">cube_maker</span><span class=\"p\">((</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"mi\">50</span><span class=\"p\">,</span> <span class=\"mi\">50</span><span class=\"p\">,</span> <span class=\"mi\">50</span><span class=\"p\">),</span> <span class=\"n\">center</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">))</span>\n<span class=\"n\">cube_actor_2</span> <span class=\"o\">=</span> <span class=\"n\">cube_maker</span><span class=\"p\">((</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">),</span> <span class=\"n\">center</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">100</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">))</span>\n</pre></div>\n</div>\n</div>\n<div class=\"section\" id=\"buttons\">\n<h2>Buttons<a class=\"headerlink\" href=\"#buttons\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>We first fetch the icons required for making the buttons.</p>\n<div class=\"highlight-default\"><div class=\"highlight\"><pre><span></span><span class=\"n\">fetch_viz_icons</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<p>Add the icon filenames to a dict.</p>\n<div class=\"highlight-default\"><div class=\"highlight\"><pre><span></span><span class=\"n\">icon_files</span> <span class=\"o\">=</span> <span class=\"nb\">dict</span><span class=\"p\">()</span>\n<span class=\"n\">icon_files</span><span class=\"p\">[</span><span class=\"s1\">&#39;stop&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">read_viz_icons</span><span class=\"p\">(</span><span class=\"n\">fname</span><span class=\"o\">=</span><span class=\"s1\">&#39;stop2.png&#39;</span><span class=\"p\">)</span>\n<span class=\"n\">icon_files</span><span class=\"p\">[</span><span class=\"s1\">&#39;play&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">read_viz_icons</span><span class=\"p\">(</span><span class=\"n\">fname</span><span class=\"o\">=</span><span class=\"s1\">&#39;play3.png&#39;</span><span class=\"p\">)</span>\n<span class=\"n\">icon_files</span><span class=\"p\">[</span><span class=\"s1\">&#39;plus&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">read_viz_icons</span><span class=\"p\">(</span><span class=\"n\">fname</span><span class=\"o\">=</span><span class=\"s1\">&#39;plus.png&#39;</span><span class=\"p\">)</span>\n<span class=\"n\">icon_files</span><span class=\"p\">[</span><span class=\"s1\">&#39;cross&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">read_viz_icons</span><span class=\"p\">(</span><span class=\"n\">fname</span><span class=\"o\">=</span><span class=\"s1\">&#39;cross.png&#39;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>Create a button through our API.</p>\n<div class=\"highlight-default\"><div class=\"highlight\"><pre><span></span><span class=\"n\">button_example</span> <span class=\"o\">=</span> <span class=\"n\">ui</span><span class=\"o\">.</span><span class=\"n\">Button2D</span><span class=\"p\">(</span><span class=\"n\">icon_fnames</span><span class=\"o\">=</span><span class=\"n\">icon_files</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>We now add some click listeners.</p>\n<div class=\"highlight-default\"><div class=\"highlight\"><pre><span></span><span class=\"k\">def</span> <span class=\"nf\">left_mouse_button_click</span><span class=\"p\">(</span><span class=\"n\">i_ren</span><span class=\"p\">,</span> <span class=\"n\">obj</span><span class=\"p\">,</span> <span class=\"n\">button</span><span class=\"p\">):</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">&quot;Left Button Clicked&quot;</span><span class=\"p\">)</span>\n\n\n<span class=\"k\">def</span> <span class=\"nf\">left_mouse_button_drag</span><span class=\"p\">(</span><span class=\"n\">i_ren</span><span class=\"p\">,</span> <span class=\"n\">obj</span><span class=\"p\">,</span> <span class=\"n\">button</span><span class=\"p\">):</span>\n    <span class=\"nb\">print</span> <span class=\"p\">(</span><span class=\"s2\">&quot;Left Button Dragged&quot;</span><span class=\"p\">)</span>\n\n<span class=\"n\">button_example</span><span class=\"o\">.</span><span class=\"n\">on_left_mouse_button_drag</span> <span class=\"o\">=</span> <span class=\"n\">left_mouse_button_drag</span>\n<span class=\"n\">button_example</span><span class=\"o\">.</span><span class=\"n\">on_left_mouse_button_pressed</span> <span class=\"o\">=</span> <span class=\"n\">left_mouse_button_click</span>\n\n\n<span class=\"k\">def</span> <span class=\"nf\">right_mouse_button_drag</span><span class=\"p\">(</span><span class=\"n\">i_ren</span><span class=\"p\">,</span> <span class=\"n\">obj</span><span class=\"p\">,</span> <span class=\"n\">button</span><span class=\"p\">):</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">&quot;Right Button Dragged&quot;</span><span class=\"p\">)</span>\n\n\n<span class=\"k\">def</span> <span class=\"nf\">right_mouse_button_click</span><span class=\"p\">(</span><span class=\"n\">i_ren</span><span class=\"p\">,</span> <span class=\"n\">obj</span><span class=\"p\">,</span> <span class=\"n\">button</span><span class=\"p\">):</span>\n    <span class=\"nb\">print</span> <span class=\"p\">(</span><span class=\"s2\">&quot;Right Button Clicked&quot;</span><span class=\"p\">)</span>\n\n<span class=\"n\">button_example</span><span class=\"o\">.</span><span class=\"n\">on_right_mouse_button_drag</span> <span class=\"o\">=</span> <span class=\"n\">right_mouse_button_drag</span>\n<span class=\"n\">button_example</span><span class=\"o\">.</span><span class=\"n\">on_right_mouse_button_pressed</span> <span class=\"o\">=</span> <span class=\"n\">right_mouse_button_click</span>\n</pre></div>\n</div>\n<p>Let&#8217;s have another button.</p>\n<div class=\"highlight-default\"><div class=\"highlight\"><pre><span></span><span class=\"n\">second_button_example</span> <span class=\"o\">=</span> <span class=\"n\">ui</span><span class=\"o\">.</span><span class=\"n\">Button2D</span><span class=\"p\">(</span><span class=\"n\">icon_fnames</span><span class=\"o\">=</span><span class=\"n\">icon_files</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>This time, we will call the built in <cite>next_icon</cite> method\nvia a callback that is triggered on left click.</p>\n<div class=\"highlight-default\"><div class=\"highlight\"><pre><span></span><span class=\"k\">def</span> <span class=\"nf\">modify_button_callback</span><span class=\"p\">(</span><span class=\"n\">i_ren</span><span class=\"p\">,</span> <span class=\"n\">obj</span><span class=\"p\">,</span> <span class=\"n\">button</span><span class=\"p\">):</span>\n    <span class=\"c1\"># i_ren: CustomInteractorStyle</span>\n    <span class=\"c1\"># obj: vtkActor picked</span>\n    <span class=\"c1\"># button: Button2D</span>\n    <span class=\"n\">button</span><span class=\"o\">.</span><span class=\"n\">next_icon</span><span class=\"p\">()</span>\n    <span class=\"n\">i_ren</span><span class=\"o\">.</span><span class=\"n\">force_render</span><span class=\"p\">()</span>\n\n<span class=\"n\">second_button_example</span><span class=\"o\">.</span><span class=\"n\">on_left_mouse_button_pressed</span> <span class=\"o\">=</span> <span class=\"n\">modify_button_callback</span>\n</pre></div>\n</div>\n</div>\n<div class=\"section\" id=\"panels\">\n<h2>Panels<a class=\"headerlink\" href=\"#panels\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>Simply create a panel and add elements to it.</p>\n<div class=\"highlight-default\"><div class=\"highlight\"><pre><span></span><span class=\"n\">panel</span> <span class=\"o\">=</span> <span class=\"n\">ui</span><span class=\"o\">.</span><span class=\"n\">Panel2D</span><span class=\"p\">(</span><span class=\"n\">center</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">440</span><span class=\"p\">,</span> <span class=\"mi\">90</span><span class=\"p\">),</span> <span class=\"n\">size</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">300</span><span class=\"p\">,</span> <span class=\"mi\">150</span><span class=\"p\">),</span> <span class=\"n\">color</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">),</span> <span class=\"n\">align</span><span class=\"o\">=</span><span class=\"s2\">&quot;right&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">panel</span><span class=\"o\">.</span><span class=\"n\">add_element</span><span class=\"p\">(</span><span class=\"n\">button_example</span><span class=\"p\">,</span> <span class=\"s1\">&#39;relative&#39;</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"mf\">0.2</span><span class=\"p\">,</span> <span class=\"mf\">0.2</span><span class=\"p\">))</span>\n<span class=\"n\">panel</span><span class=\"o\">.</span><span class=\"n\">add_element</span><span class=\"p\">(</span><span class=\"n\">second_button_example</span><span class=\"p\">,</span> <span class=\"s1\">&#39;absolute&#39;</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"mi\">480</span><span class=\"p\">,</span> <span class=\"mi\">100</span><span class=\"p\">))</span>\n</pre></div>\n</div>\n</div>\n<div class=\"section\" id=\"textbox\">\n<h2>TextBox<a class=\"headerlink\" href=\"#textbox\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<div class=\"highlight-default\"><div class=\"highlight\"><pre><span></span><span class=\"n\">text</span> <span class=\"o\">=</span> <span class=\"n\">ui</span><span class=\"o\">.</span><span class=\"n\">TextBox2D</span><span class=\"p\">(</span><span class=\"n\">height</span><span class=\"o\">=</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"n\">width</span><span class=\"o\">=</span><span class=\"mi\">10</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</div>\n<div class=\"section\" id=\"d-line-slider\">\n<h2>2D Line Slider<a class=\"headerlink\" href=\"#d-line-slider\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<div class=\"highlight-default\"><div class=\"highlight\"><pre><span></span><span class=\"n\">line_slider</span> <span class=\"o\">=</span> <span class=\"n\">ui</span><span class=\"o\">.</span><span class=\"n\">LineSlider2D</span><span class=\"p\">(</span><span class=\"n\">initial_value</span><span class=\"o\">=-</span><span class=\"mi\">2</span><span class=\"p\">,</span>\n                              <span class=\"n\">min_value</span><span class=\"o\">=-</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"n\">max_value</span><span class=\"o\">=</span><span class=\"mi\">5</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</div>\n<div class=\"section\" id=\"adding-elements-to-the-showmanager\">\n<h2>Adding Elements to the ShowManager<a class=\"headerlink\" href=\"#adding-elements-to-the-showmanager\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>Once all elements have been initialised, they have\nto be added to the show manager in the following manner.</p>\n<div class=\"highlight-default\"><div class=\"highlight\"><pre><span></span><span class=\"n\">current_size</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"mi\">600</span><span class=\"p\">,</span> <span class=\"mi\">600</span><span class=\"p\">)</span>\n<span class=\"n\">show_manager</span> <span class=\"o\">=</span> <span class=\"n\">window</span><span class=\"o\">.</span><span class=\"n\">ShowManager</span><span class=\"p\">(</span><span class=\"n\">size</span><span class=\"o\">=</span><span class=\"n\">current_size</span><span class=\"p\">,</span> <span class=\"n\">title</span><span class=\"o\">=</span><span class=\"s2\">&quot;DIPY UI Example&quot;</span><span class=\"p\">)</span>\n\n<span class=\"n\">show_manager</span><span class=\"o\">.</span><span class=\"n\">ren</span><span class=\"o\">.</span><span class=\"n\">add</span><span class=\"p\">(</span><span class=\"n\">cube_actor_1</span><span class=\"p\">)</span>\n<span class=\"n\">show_manager</span><span class=\"o\">.</span><span class=\"n\">ren</span><span class=\"o\">.</span><span class=\"n\">add</span><span class=\"p\">(</span><span class=\"n\">cube_actor_2</span><span class=\"p\">)</span>\n<span class=\"n\">show_manager</span><span class=\"o\">.</span><span class=\"n\">ren</span><span class=\"o\">.</span><span class=\"n\">add</span><span class=\"p\">(</span><span class=\"n\">panel</span><span class=\"p\">)</span>\n<span class=\"n\">show_manager</span><span class=\"o\">.</span><span class=\"n\">ren</span><span class=\"o\">.</span><span class=\"n\">add</span><span class=\"p\">(</span><span class=\"n\">text</span><span class=\"p\">)</span>\n<span class=\"n\">show_manager</span><span class=\"o\">.</span><span class=\"n\">ren</span><span class=\"o\">.</span><span class=\"n\">add</span><span class=\"p\">(</span><span class=\"n\">line_slider</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># Uncomment this to start the visualisation</span>\n<span class=\"c1\"># show_manager.start()</span>\n</pre></div>\n</div>\n<div class=\"admonition-example-source-code admonition\">\n<p class=\"first admonition-title\">Example source code</p>\n<p class=\"last\">You can download <a class=\"reference download internal\" href=\"../../_downloads/viz_ui.py\" download=\"\"><code class=\"xref download docutils literal\"><span class=\"pre\">the</span> <span class=\"pre\">full</span> <span class=\"pre\">source</span> <span class=\"pre\">code</span> <span class=\"pre\">of</span> <span class=\"pre\">this</span> <span class=\"pre\">example</span></code></a>.\nThis same script is also included in the dipy source distribution under the\n<code class=\"file docutils literal\"><span class=\"pre\">doc/examples/</span></code> directory.</p>\n</div>\n</div>\n</div>\n", "alabaster_version": "0.7.7", "display_toc": true, "title": "User Interface", "sourcename": "examples_built/viz_ui.rst.txt", "customsidebar": null, "metatags": "", "current_page_name": "examples_built/viz_ui", "next": null, "rellinks": [["genindex", "General Index", "I", "index"]], "meta": {}, "parents": [], "sidebars": null, "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">User Interface</a><ul>\n<li><a class=\"reference internal\" href=\"#d-elements\">3D Elements</a></li>\n<li><a class=\"reference internal\" href=\"#buttons\">Buttons</a></li>\n<li><a class=\"reference internal\" href=\"#panels\">Panels</a></li>\n<li><a class=\"reference internal\" href=\"#textbox\">TextBox</a></li>\n<li><a class=\"reference internal\" href=\"#d-line-slider\">2D Line Slider</a></li>\n<li><a class=\"reference internal\" href=\"#adding-elements-to-the-showmanager\">Adding Elements to the ShowManager</a></li>\n</ul>\n</li>\n</ul>\n", "prev": null, "page_source_suffix": ".rst"}